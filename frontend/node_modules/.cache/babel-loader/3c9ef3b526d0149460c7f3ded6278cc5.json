{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\n\nimport * as utils from '../utils';\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function getLocalStreams() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      return this._localStreams;\n    };\n  }\n\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      } // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n\n\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track, stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track, stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function addTrack(track) {\n      for (var _len = arguments.length, streams = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        streams[_key - 1] = arguments[_key];\n      }\n\n      if (streams) {\n        streams.forEach(stream => {\n          if (!this._localStreams) {\n            this._localStreams = [stream];\n          } else if (!this._localStreams.includes(stream)) {\n            this._localStreams.push(stream);\n          }\n        });\n      }\n\n      return _addTrack.apply(this, arguments);\n    };\n  }\n\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function removeStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n\n      const index = this._localStreams.indexOf(stream);\n\n      if (index === -1) {\n        return;\n      }\n\n      this._localStreams.splice(index, 1);\n\n      const tracks = stream.getTracks();\n      this.getSenders().forEach(sender => {\n        if (tracks.includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function getRemoteStreams() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = e => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n\n            this._remoteStreams.push(stream);\n\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n\n    });\n    const origSetRemoteDescription = window.RTCPeerConnection.prototype.setRemoteDescription;\n\n    window.RTCPeerConnection.prototype.setRemoteDescription = function setRemoteDescription() {\n      const pc = this;\n\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function (e) {\n          e.streams.forEach(stream => {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n\n            pc._remoteStreams.push(stream);\n\n            const event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function createOffer(successCallback, failureCallback) {\n    const options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    const promise = origCreateOffer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function createAnswer(successCallback, failureCallback) {\n    const options = arguments.length >= 2 ? arguments[2] : arguments[0];\n    const promise = origCreateAnswer.apply(this, [options]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  let withCallback = function (description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function (description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function (candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n\n    if (!failureCallback) {\n      return promise;\n    }\n\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.addIceCandidate = withCallback;\n}\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n\n    navigator.mediaDevices.getUserMedia = constraints => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints).then(cb, errcb);\n    }.bind(navigator);\n  }\n}\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({}, constraints, {\n      video: utils.compactObject(constraints.video)\n    });\n  }\n\n  return constraints;\n}\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  } // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n\n\n  const OrigPeerConnection = window.RTCPeerConnection;\n\n  window.RTCPeerConnection = function RTCPeerConnection(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      const newIceServers = [];\n\n      for (let i = 0; i < pcConfig.iceServers.length; i++) {\n        let server = pcConfig.iceServers[i];\n\n        if (!server.hasOwnProperty('urls') && server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n\n      pcConfig.iceServers = newIceServers;\n    }\n\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype; // wrap static methods. Currently just generateCertificate.\n\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n\n    });\n  }\n}\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent && 'receiver' in window.RTCTrackEvent.prototype && !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {\n          receiver: this.receiver\n        };\n      }\n\n    });\n  }\n}\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n\n  window.RTCPeerConnection.prototype.createOffer = function createOffer(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n\n      const audioTransceiver = this.getTransceivers().find(transceiver => transceiver.receiver.track.kind === 'audio');\n\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true && !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n\n      const videoTransceiver = this.getTransceivers().find(transceiver => transceiver.receiver.track.kind === 'video');\n\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true && !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n\n    return origCreateOffer.apply(this, arguments);\n  };\n}\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n\n  window.AudioContext = window.webkitAudioContext;\n}","map":{"version":3,"names":["utils","shimLocalStreamsAPI","window","RTCPeerConnection","prototype","getLocalStreams","_localStreams","_addTrack","addTrack","addStream","stream","includes","push","getAudioTracks","forEach","track","call","getVideoTracks","streams","apply","arguments","removeStream","index","indexOf","splice","tracks","getTracks","getSenders","sender","removeTrack","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","Object","defineProperty","get","_onaddstream","set","f","removeEventListener","_onaddstreampoly","addEventListener","e","event","Event","dispatchEvent","origSetRemoteDescription","setRemoteDescription","pc","shimCallbacksAPI","origCreateOffer","createOffer","origCreateAnswer","createAnswer","setLocalDescription","addIceCandidate","successCallback","failureCallback","options","length","promise","then","Promise","resolve","withCallback","description","candidate","shimGetUserMedia","navigator","mediaDevices","getUserMedia","_getUserMedia","bind","constraints","shimConstraints","cb","errcb","video","undefined","assign","compactObject","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","i","server","hasOwnProperty","deprecated","JSON","parse","stringify","urls","url","generateCertificate","shimTrackEventTransceiver","RTCTrackEvent","receiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","find","transceiver","kind","direction","setDirection","addTransceiver","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext"],"sources":["C:/Users/Camillo/Desktop/pettochat/frontend/node_modules/webrtc-adapter/src/js/safari/safari_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}