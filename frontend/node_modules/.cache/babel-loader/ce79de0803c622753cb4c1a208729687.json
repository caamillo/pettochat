{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\n\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n} // Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\n\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n\n  proto.addEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n\n    const wrappedCallback = e => {\n      const modifiedEvent = wrapper(e);\n\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n\n    this._eventMap = this._eventMap || {};\n\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n\n    return nativeAddEventListener.apply(this, [nativeEventName, wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n\n  proto.removeEventListener = function (nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n\n    this._eventMap[eventNameToWrap].delete(cb);\n\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n\n    return nativeRemoveEventListener.apply(this, [nativeEventName, unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap, this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n\n      if (cb) {\n        this.addEventListener(eventNameToWrap, this['_on' + eventNameToWrap] = cb);\n      }\n    },\n\n    enumerable: true,\n    configurable: true\n  });\n}\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool + '. Please use a boolean.');\n  }\n\n  logDisabled_ = bool;\n  return bool ? 'adapter.js logging disabled' : 'adapter.js logging enabled';\n}\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\n\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool + '. Please use a boolean.');\n  }\n\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\n\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod + ' instead.');\n}\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\n\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {\n    browser: null,\n    version: null\n  }; // Fail early if it's not a browser\n\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {\n    navigator\n  } = window;\n\n  if (navigator.mozGetUserMedia) {\n    // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent, /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia || window.isSecureContext === false && window.webkitRTCPeerConnection && !window.RTCIceGatherer) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent, /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices && navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) {\n    // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent, /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection && navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\n    // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent, /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver && 'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else {\n    // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\n\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\n\n\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function (accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n\n    return Object.assign(accumulator, {\n      [key]: value\n    });\n  }, {});\n}\n/* iterates the stats graph recursively. */\n\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n/* filter getStats for a sender/receiver track. */\n\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n\n  if (track === null) {\n    return filteredResult;\n  }\n\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' && value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}","map":{"version":3,"names":["logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","length","parseInt","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","apply","arguments","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","Object","keys","defineProperty","enumerable","configurable","disableLog","bool","Error","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","detectBrowser","result","browser","version","navigator","mozGetUserMedia","userAgent","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","RTCIceGatherer","mediaDevices","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","toString","call","compactObject","data","reduce","accumulator","key","isObj","value","isEmptyObject","undefined","assign","walkStats","stats","base","resultSet","id","forEach","name","endsWith","filterStats","track","outbound","streamStatsType","filteredResult","trackStats","type","trackIdentifier","push","trackStat","trackId"],"sources":["C:/Users/Camillo/Desktop/pettochat/frontend/node_modules/webrtc-adapter/src/js/utils.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}